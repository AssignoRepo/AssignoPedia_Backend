<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Payslip - July 2025</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 30px;
      background: #f9f9f9;
    }

    .payslip-container {
      max-width: 800px;
      margin: auto;
      padding: 25px;
      background: #fff;
      border: 3px solid #764ba2;
      position: relative;
      background-image: url('https://www.assignopediaservices.com/images/logo.png');
      background-position: center;
      background-repeat: no-repeat;
      background-size: 370px;
      background: rgba(255,255,255,0.9);
      opacity: 1;
    }

    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 2px solid #004080;
      padding-bottom: 10px;
      margin-bottom: 20px;
    }

    .header img {
      height: 60px;
    }

    .header .company-name {
      font-size: 22px;
      font-weight: bold;
      color: #004080;
      text-align: left;
      flex: 1;
    }

    h3 {
      text-align: center;
      margin-bottom: 10px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
      background: rgba(255,255,255,0.9); /* Slight background to improve text readability */
    }

    th, td {
      padding: 10px;
      text-align: left;
      border: 1px solid #ddd;
    }

    th {
      background: #f0f0f0;
    }

    .section-title {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: 8px;
      font-weight: bold;
      margin-top: 30px;
    }

    .footer {
      text-align: center;
      font-size: 13px;
      color: #555;
      margin-top: 30px;
    }

    .net-amount-words {
      font-style: italic;
      margin-top: -10px;
      font-size: 14px;
      color: #333;
    }
    
    @media screen and (max-width: 600px) {
  body {
    margin: 10px;
  }

  .payslip-container {
    padding: 15px;
    border: none;
    background-size: 150px;
  }

  .header {
    flex-direction: column;
    align-items: flex-start;
    text-align: left;
  }

  .header img {
    margin-bottom: 10px;
  }

  .header .company-name {
    text-align: left;
    font-size: 18px;
  }

  table {
    font-size: 14px;
    display: block;
    overflow-x: auto;
    white-space: nowrap;
  }

  th, td {
    padding: 8px;
  }

  .section-title {
    font-size: 16px;
  }

  .net-amount-words {
    font-size: 13px;
  }

  .footer {
    font-size: 12px;
  }
}

  </style>
</head>
<body>

<div class="payslip-container">
  <!-- Header with Logo and Company Name -->
  <div class="header">
      <div class="company-name">Assignopedia Services</div>
    <img src="https://www.assignopediaservices.com/images/logo.png" alt="Company Logo">
   
  </div>

  <h3>Payslip for the Month of July 2025</h3>

  <!-- Employee Details -->
  <div class="section-title">Employee Details</div>
  <table>
    <tr><th>Employee Name</th><td>John Doe</td></tr>
    <tr><th>Employee ID</th><td>EMP12345</td></tr>
    <tr><th>Department</th><td>Sales</td></tr>
    <tr><th>Designation</th><td>Sales Executive</td></tr>
    <tr><th>Employee Address</th><td>123 Main Street, New York, USA</td></tr>
    <tr><th>Date of Joining</th><td>10-Jan-2021</td></tr>
  </table>

  <!-- Attendance Summary -->
  <div class="section-title">Attendance Summary</div>
  <table>
    <tr>
      <th>Total Present</th>
      <th>Total Absent</th>
      <th>Paid Leaves</th>
      <th>NPL</th>
      <th>DNPL</th>
    </tr>
    <tr>
      <td>22</td>
      <td>2</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </table>

  <!-- Earnings -->
  <div class="section-title">Earnings</div>
  <table>
    <tr><th>Description</th><th>Amount (INR)</th></tr>
    <tr><td>Basic Salary</td><td>0.00</td></tr>
    <tr><td>HRA</td><td>0.00</td></tr>
   
    <tr><td>Special Allowance</td><td>0.00</td></tr>
    
    <tr><th>Total Earnings</th><th>0.00</th></tr>
  </table>

  <!-- Deductions -->
  <div class="section-title">Deductions</div>
  <table>
    <tr><th>Description</th><th>Amount (INR)</th></tr>
    <tr><td>Provident Fund (PF)</td><td>0.00</td></tr>
    <tr><td>ESI</td><td>0.00</td></tr>
   
    <tr><td>Leave Deduction (DNPL)</td><td>0.00</td></tr>
    <tr><td>Leave Deduction (NPL)</td><td>0.00</td></tr>
    <tr><th>Total Deductions</th><th>0.00</th></tr>
  </table>

  <!-- Net Pay -->
  <div class="section-title">Net Salary</div>
  <table>
    <tr><th>Net Pay (INR)</th><td><strong>₹ 37,000.00</strong></td></tr>
  </table>
  <div class="net-amount-words">Amount in words: <strong>Thirty-Seven Thousand Rupees Only</strong></div>

  <div class="footer">
    This is a computer-generated payslip and does not require a signature.<br>
    For any queries, contact HR at hr@example.com
  </div>
</div>
<script>
  // Utility: Convert number to words (Indian style)
  function numberToWords(num) {
    if (num === 0) return "Zero";
    const a = ["", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten",
      "Eleven", "Twelve", "Thirteen", "Fourteen", "Fifteen", "Sixteen", "Seventeen", "Eighteen", "Nineteen"];
    const b = ["", "", "Twenty", "Thirty", "Forty", "Fifty", "Sixty", "Seventy", "Eighty", "Ninety"];
    function inWords(n) {
      if (n < 20) return a[n];
      if (n < 100) return b[Math.floor(n / 10)] + (n % 10 ? " " + a[n % 10] : "");
      if (n < 1000) return a[Math.floor(n / 100)] + " Hundred" + (n % 100 ? " and " + inWords(n % 100) : "");
      if (n < 100000) return inWords(Math.floor(n / 1000)) + " Thousand" + (n % 1000 ? " " + inWords(n % 1000) : "");
      if (n < 10000000) return inWords(Math.floor(n / 100000)) + " Lakh" + (n % 100000 ? " " + inWords(n % 100000) : "");
      return inWords(Math.floor(n / 10000000)) + " Crore" + (n % 10000000 ? " " + inWords(n % 10000000) : "");
    }
    return inWords(num);
  }

  // Helper: Get query param from URL
  function getQueryParam(name) {
    const url = new URL(window.location.href);
    return url.searchParams.get(name);
  }

  // Auto-fill payslip fields dynamically
  async function fetchPayslipData() {
    const employeeId = getQueryParam('employeeId');
    const month = getQueryParam('month');
    const year = getQueryParam('year');
    if (!employeeId || !month || !year) return;

    try {
      const res = await fetch(`/api/payslip?employeeId=${employeeId}&month=${month}&year=${year}`);
      if (!res.ok) throw new Error('Payslip not found');
      const payslip = await res.json();

      // Fill basic info
      document.querySelector('td:nth-child(2)').textContent = payslip.employeeName;
      document.querySelector('tr:nth-child(2) td:nth-child(2)').textContent = payslip.employeeId;
      document.querySelector('tr:nth-child(3) td:nth-child(2)').textContent = payslip.department;
      document.querySelector('tr:nth-child(4) td:nth-child(2)').textContent = payslip.designation;
      document.querySelector('tr:nth-child(5) td:nth-child(2)').textContent = payslip.address;
      document.querySelector('tr:nth-child(6) td:nth-child(2)').textContent = payslip.doj;

      // Attendance
      const attRow = document.querySelectorAll('.section-title')[1].nextElementSibling.rows[1].cells;
      attRow[0].textContent = payslip.totalPresent;
      attRow[1].textContent = payslip.totalAbsent;
      attRow[2].textContent = payslip.paidLeaves;
      attRow[3].textContent = payslip.npl;
      attRow[4].textContent = payslip.dnpl;

      // Earnings
      const earnTable = document.querySelectorAll('.section-title')[2].nextElementSibling;
      earnTable.rows[1].cells[1].textContent = payslip.basic;
      earnTable.rows[2].cells[1].textContent = payslip.hra;
     
      earnTable.rows[3].cells[1].textContent = payslip.specialAllowance;
     
      earnTable.rows[4].cells[1].textContent = payslip.totalEarnings;

      // Deductions
      const dedTable = document.querySelectorAll('.section-title')[3].nextElementSibling;
      dedTable.rows[1].cells[1].textContent = payslip.pf;
      dedTable.rows[2].cells[1].textContent = payslip.esi;
      
      
      dedTable.rows[3].cells[1].textContent = payslip.leaveDeduction;
         dedTable.rows[4].cells[1].textContent = payslip.leaveDeduction;
      dedTable.rows[5].cells[1].textContent = payslip.totalDeductions;

      // Net Pay
      document.querySelector('.section-title + table:last-of-type td strong').textContent = `₹ ${payslip.netPay}`;
      document.querySelector('.net-amount-words strong').textContent = numberToWords(Math.round(payslip.netPay)) + ' Rupees Only';

    } catch (err) {
      document.body.innerHTML = `<div style='text-align:center;margin-top:100px;color:#b00;font-size:1.3em;'>Payslip not found or error loading payslip.</div>`;
    }
  }

  fetchPayslipData();
</script>

</body>
</html>

